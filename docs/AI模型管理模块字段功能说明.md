# AI 模型管理模块字段功能说明

## 概述
AI 模型管理模块提供了完整的模型配置、创建、编辑和查看功能。支持单个模型创建和批量模型创建两种模式。

## 字段分类

### 1. 基本信息字段

| 字段名 | 字段标识 | 类型 | 必填 | 功能说明 |
|--------|----------|------|------|----------|
| AI服务商 | `providerId` | Select | ✓ | 选择AI服务服务商，如OpenAI、DeepSeek等，或自定义服务商 |
| 自定义服务商名称 | `customProviderName` | Input | △ | 选择自定义服务商时必填，用于标识服务商名称 |
| API地址 | `customApiUrl` | Input | × | 自定义API接口地址，留空使用默认地址 |
| API密钥 | `apiKeyEncrypted` | Password | ✓ | 访问AI服务的API密钥，支持加密存储 |
| 模型名称 | `name` | Select/Input | ✓ | 具体的模型名称，可从拉取的模型列表选择或手动输入 |
| 模型类型 | `modelType` | Select | × | 模型功能类型：对话模型、补全模型、嵌入模型 |

### 2. 配置参数字段

| 字段名 | 字段标识 | 类型 | 默认值 | 功能说明 |
|--------|----------|------|--------|----------|
| 角色 | `role` | Select | secondary | 模型角色定位：主模型、备用模型、禁用 |
| 优先级 | `priority` | Number | 100 | 数值越小优先级越高，范围1-1000 |
| 成本/1K tokens | `costPer1kTokens` | Number | 0 | 每1000个token的成本（人民币），支持6位小数 |
| 上下文窗口 | `contextWindow` | Number | 4000 | 模型支持的最大上下文tokens数量，范围1-32000 |
| 启用状态 | `isActive` | Switch | true | 模型是否启用，控制模型可用性 |

### 3. 模型参数字段

| 字段名 | 字段标识 | 类型 | 默认值 | 功能说明 |
|--------|----------|------|--------|----------|
| 温度参数 | `parameters.temperature` | Number | 0.7 | 控制输出随机性，范围0-2，值越高越随机 |
| 最大令牌数 | `parameters.max_tokens` | Number | 3000 | 单次生成的最大令牌数量，范围1-8000 |
| Top P参数 | `parameters.top_p` | Number | 1.0 | 核采样参数，控制词汇选择范围，范围0-1 |
| 频率惩罚 | `parameters.frequency_penalty` | Number | 0 | 减少重复内容的惩罚参数，范围-2到2 |

## 特殊功能

### 1. 连接测试功能
- **测试连接**：验证API密钥和地址的有效性
- **拉取模型列表**：从服务商API获取可用模型列表
- **单模型测试**：测试特定模型的可用性和响应延迟
- **批量测试**：并发测试多个模型的连接状态

### 2. 批量创建模式
- 启用批量创建模式后，可以从拉取的模型列表中选择多个模型
- 使用相同的基础配置批量创建多个模型
- 支持批量测试选中的模型
- 显示创建成功和失败的统计信息

### 3. 数据验证
- API密钥解密失败时会提示重新输入
- 自定义服务商必须配置API地址
- 批量创建时至少选择一个模型
- 所有必填字段都有相应的验证规则

### 4. 缓存管理
- 创建或更新成功后自动清除AI配置缓存
- 确保配置变更立即生效

## 页面功能对比

| 功能 | 创建页面 | 编辑页面 | 查看页面 |
|------|----------|----------|----------|
| 字段编辑 | ✓ | ✓ | × |
| 批量创建 | ✓ | ✓ | × |
| 连接测试 | ✓ | ✓ | ✓ |
| 模型测试 | ✓ | ✓ | × |
| API密钥显示/隐藏 | × | ✓ | ✓ |
| 数据刷新 | × | × | ✓ |

## 注意事项
1. API密钥采用加密存储，编辑时如果解密失败需要重新输入
2. DeepSeek服务商会自动填充默认API地址
3. 模型参数配置会影响AI生成内容的质量和成本
4. 优先级设置影响模型的调用顺序
5. 上下文窗口设置需要根据模型实际支持的大小进行配置
